Rules for coupling ISSM and MITgcm:


>>>> CREATE A FILE WITH ALL THE NAMES AND TAGS
>>>> FOR THE INFORMATION EXCHANGE INCLUDING:

CouplingTime           1           Real*8  10001000
IceModelTime           1           Real*8  10001001
OceanModelTime         1           Real*8  10001002
Nx                     1           Integer 10001003
Ny                     1           Integer 10001004
xC                     Nx*Ny       Real*8  10001005
yC                     Nx*Ny       Real*8  10001006
OceanMelt              Nx*Ny       Real*8  10001007
    melt_mesh[i]=-melt_mesh[i]/rho_ice; heat flux provided by ocean is in kg/m^2/s
IceMass    (kg/m^2)    Nx*Ny       Real*8  10001008
DIceMassDt (kg/m^2/s)  Nx*Ny       Real*8  10001009
    dynamic ice mass change only, i.e., not including melt rate


>>>> INITIALIZATION FROM SCRATCH

Initialization:

  IceModelTime   = 0
  OceanModelTime = 0

  I1. ISSM sends CouplingTime, the interval at which we couple
  I2. MITgcm sends grid size (NX and NY)
  I3. MITgcm sends grid coordinates of center of cells
      (longitude -180 <= XC < 180 and latitude YC)
  I4. ISSM sends IceModelTime=0 IceMass to MITgcm

First Recurrent Coupling Exchange:

  IceModelTime   = 0
  OceanModelTime = 0

  C1. ISSM sends ice model time IceTimeTag
  C2. MITgcm sends ocean model time OceanTimeTag
  C3. MITgcm sends IceMass to ISSM
      (used to compute a correction for DIceMassDt)
  C4. ISSM integrates with zero OceanMelt from
      IceModelTime = 0 to CouplingTime
  C5. ISSM sends DIceMassDT to MITgcm
  C6. MITgcm integrates from
      OceanModelTime = 0 to CouplingTime
  C7. MITgcm sends OceanMelt to ISSM
  C8. ISSM integrates with OceanMelt from
      IceModelTime = 0 to CouplingTime

  IceModelTime   = 1
  OceanModelTime = 1

...

Coupling Exchange M:

  IceModelTime   = (M-1) * CouplingTime
  OceanModelTime = (M-1) * CouplingTime

  C1. ISSM sends ice model time IceTimeTag
  C2. MITgcm sends ocean model time OceanTimeTag
  C3. MITgcm sends IceMass to ISSM
      (used to compute a correction for DIceMassDt)
  C4. ISSM integrates with zero OceanMelt from
      IceModelTime = (M-1) to M * CouplingTime
  C5. ISSM sends DIceMassDT to MITgcm
  C6. MITgcm integrates from
      OceanModelTime = (M-1) to M * CouplingTime
  C7. MITgcm sends OceanMelt to ISSM
  C8. ISSM integrates with OceanMelt from
      IceModelTime = (M-1) to M * CouplingTime

  IceModelTime   = M * CouplingTime
  OceanModelTime = M * CouplingTime

...

Termination after N coupling exchanges:

  IceModelTime   = N * CouplingTime
  OceanModelTime = N * CouplingTime

  T1. ISSM saves state to restart files
  T2. MITgcm saves state to restart files


>>>> RESTART FROM SAVED STATE

Initialization:

  IceModelTime   = N * CouplingTime
  OceanModelTime = N * CouplingTime

  R1. ISSM reads state from restart files
  R2. MITgcm reads state from restart files

  I1. ISSM sends CouplingTime, the interval at which we couple
  I2. MITgcm sends grid size (NX and NY)
  I3. MITgcm sends grid coordinates of center of cells
      (longitude -180 <= XC < 180 and latitude YC)

First Recurrent Coupling Exchange:

  IceModelTime   = N * CouplingTime
  OceanModelTime = N * CouplingTime

  C1. ISSM sends ice model time IceTimeTag
  C2. MITgcm sends ocean model time OceanTimeTag
  C3. MITgcm sends IceMass to ISSM
      (used to compute a correction for DIceMassDt)
  C4. ISSM integrates with zero OceanMelt from
      IceModelTime = N to (N+1) * CouplingTime
  C5. ISSM sends DIceMassDT to MITgcm
  C6. MITgcm integrates from
      OceanModelTime = N to (N+1) * CouplingTime
  C7. MITgcm sends OceanMelt to ISSM
  C8. ISSM integrates with OceanMelt from
      IceModelTime = N to (N+1) * CouplingTime

  IceModelTime   = (N+1) * CouplingTime
  OceanModelTime = (N+1) * CouplingTime

...
